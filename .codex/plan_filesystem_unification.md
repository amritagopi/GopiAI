# План унификации файловых инструментов

## Проблема
Обнаружено 5 различных реализаций файловой системы с дублированием функциональности:
- GopiAIFileSystemTool (25+ операций)
- UnrestrictedFileSystemTool (2 копии)
- SimpleFileSystemTool (базовый)
- 3 отдельных инструмента из crewai_toolkit

Это приводит к:
- Сотням повторных вызовов file_operations
- Путанице модели при выборе инструмента
- Конфликтам между инструментами
- Сложности в поддержке

## Решение

### Этап 1: Выбор основного инструмента
Выбрать `GopiAIFileSystemTool` как основной (самый полный и хорошо интегрированный)

### Этап 2: Унификация функциональности
1. Объединить все уникальные операции из разных инструментов
2. Стандартизировать формат возврата данных
3. Добавить недостающие операции из других инструментов

### Этап 3: Оптимизация диспетчера инструментов
1. Увеличить `max_same_tool_calls` до разумного значения
2. Добавить интеллектуальное кэширование результатов
3. Реализовать механизм "умного повторения" с контекстом

### Этап 4: Настройка парсера намерений
1. Снизить порог уверенности для автоматического запуска
2. Добавить механизм "ожидания ответа" перед повторным вызовом
3. Реализовать группировку связанных операций

### Этап 5: Очистка и тестирование
1. Удалить дублирующие инструменты
2. Обновить импорты и конфигурации
3. Провести нагрузочное тестирование

## Риски
- Потеря совместимости с существующими запросами
- Изменение формата ответов
- Необходимость перенастройки агентов

## Преимущества
- Упрощение архитектуры
- Снижение нагрузки на модель
- Улучшение производительности
- Упрощение поддержки