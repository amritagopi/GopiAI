## Архитектура проекта

Проект имеет четырехуровневую архитектуру:

1. __Агенты__ (`BaseAgent`) - обрабатывают запросы и управляют выполнением задач
2. __Инструменты__ (`BaseTool`) - предоставляют специфические функции для агентов
3. __Потоки__ (`BaseFlow`) - организуют работу нескольких агентов в последовательности
4. __Интерфейс__ (`MainWindow`, `ChatWidget`) - обеспечивает взаимодействие с пользователем

## Текущее состояние подключения модулей

### Подключенные модули:

- __ChatWidget__ → __MainWindow__: чат-интерфейс полностью интегрирован в главное окно
- __Базовые агенты__ → __UI__: основная интеграция через `_setup_agent()` и `AgentWorker`
- __Специализированные агенты__: доступны через отдельные диалоги (`CodingAgentDialog`, `BrowserAgentDialog`)

### Модули с частичной интеграцией:

- __Потоки (Flows)__: есть визуализация (`_show_flow_visualization`), но нет полного управления
- __Некоторые инструменты__: косвенно используются через специализированные агенты

### Не полностью подключенные модули:

1. __Инструменты (Tools)__: нет прямого управления инструментами через интерфейс
2. __Настройка потоков (Flows)__: нет возможности создавать/настраивать потоки через UI
3. __Расширенное управление агентами__: настройка агентов через интерфейс ограничена

## План подключения недостающих модулей

### 1. Подключение инструментов (Tools)

1. Создать панель управления инструментами (ToolManagerWidget)

2. Интегрировать её в UI как новый док-виджет или диалог

3. Реализовать интерфейс для:

   - Просмотра доступных инструментов
   - Включения/отключения инструментов для агентов
   - Настройки параметров инструментов

### 2. Подключение потоков (Flows)

1. Разработать интерфейс управления потоками (FlowManagerWidget)

2. Добавить функциональность для:

   - Выбора типа потока (PLANNING, AGENT, HYBRID)
   - Конфигурации последовательности агентов
   - Сохранения/загрузки конфигураций потоков

3. Интегрировать с существующей визуализацией потоков

### 3. Расширение управления агентами

1. Улучшить настройку агентов в интерфейсе

2. Добавить возможность:

   - Выбора основного агента
   - Настройки параметров (max\_steps, system\_prompt)
   - Настройки связи агент-инструмент

### 4. Улучшение интеграции существующих компонентов

1. Доработать обработку сообщений между ChatWidget и агентами
2. Добавить визуальную обратную связь о процессе выполнения
3. Реализовать информационную панель о текущих активных компонентах

## Техническая реализация

Для каждого модуля потребуется:

1. Создать соответствующий виджет/диалог
2. Реализовать логику управления компонентами
3. Интегрировать с существующим интерфейсом
4. Обновить сигналы/слоты для обеспечения взаимодействия
