# Циклические импорты в проекте и их решение

В проекте была обнаружена и исправлена критическая проблема с циклическими импортами, которая мешала запуску приложения.

## Проблема

Основная ошибка возникала при импорте между двумя модулями:

1. `app/utils/theme_manager.py` импортировал `get_additional_qss_template` из `app/utils/theme_utils.py`
2. В то же время `app/utils/theme_utils.py` импортировал `ThemeManager` из `app/utils/theme_manager.py`

Это создавало циклическую зависимость, из-за которой Python не мог правильно инициализировать модули. Ошибка выглядела как:
```
ImportError: cannot import name 'ThemeManager' from partially initialized module 'app.utils.theme_manager' (most likely due to a circular import)
```

## Решение

Для решения проблемы был использован стандартный подход - замена глобальных импортов на локальные импорты внутри функций:

1. В файле `app/utils/theme_utils.py`:
   - Удален глобальный импорт `from app.utils.theme_manager import ThemeManager`
   - Добавлен локальный импорт `from app.utils.theme_manager import ThemeManager` внутри функций, где это необходимо

2. В файле `app/utils/theme_manager.py`:
   - Удален глобальный импорт `from app.utils.theme_utils import get_additional_qss_template`
   - Добавлен локальный импорт `from app.utils.theme_utils import get_additional_qss_template` внутри метода `_apply_visual_theme`

## Принцип работы решения

Локальные импорты выполняются не при загрузке модуля, а только при вызове функции. Это позволяет разорвать цикл импортов, так как каждый из модулей успевает полностью инициализироваться перед тем, как произойдет импорт зависимого модуля.

## Рекомендации на будущее

1. **Избегать циклических зависимостей** - стараться проектировать модули так, чтобы они не зависели друг от друга взаимно
2. **Использовать локальные импорты** - когда взаимные зависимости неизбежны
3. **Проверять импорты при рефакторинге** - особенно когда код разделяется на отдельные модули
4. **Рассмотреть выделение общей функциональности** - если два модуля зависят друг от друга, возможно имеет смысл вынести общую логику в третий модуль