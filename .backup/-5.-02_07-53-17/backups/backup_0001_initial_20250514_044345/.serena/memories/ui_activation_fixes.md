# Исправления проблем с активацией UI элементов

В UI приложения были обнаружены следующие проблемы:

1. Элементы меню не реагировали на нажатия (меню Help, View, Tools и др.)
2. Ошибка при открытии настроек: `ThemeManager object has no attribute 'get_available_themes'`

Проведенный анализ выявил следующие причины:

1. Конфликт двух способов создания меню:
   - Через `main_window._create_menus()`
   - Через `setup_menus(main_window)` и использование `MenuManager`

2. Неправильные имена методов в `ThemeManager`:
   - Использовался `get_available_themes()` вместо `get_available_visual_themes()`
   - Использовался `set_theme()` вместо `switch_visual_theme()`

3. Методы в `MainWindow`, к которым подключаются сигналы из `MenuManager`, реализованы как пустые заглушки, просто логирующие действия.

Внесенные исправления:

1. В `app/ui/preferences_dialog.py`:
   - Заменены вызовы `get_available_themes()` на `get_available_visual_themes()`
   - Заменены вызовы `set_theme()` на `switch_visual_theme()`

2. В `app/ui/main_window.py`:
   - Изменен метод `_setup_ui()` для устранения конфликта при создании меню
   - Добавлена обработка ошибок при настройке меню

3. В `app/ui/menus.py`:
   - Добавлена отладочная информация и проверка на наличие `_create_menus`
   - Добавлена проверка наличия `icon_manager` для `MenuManager`

4. В `app/ui/menu_manager.py`:
   - Добавлена проверка наличия методов в `MainWindow`, к которым подключаются сигналы

При запуске приложения теперь видно, что возникает конфликт между двумя способами создания меню, но благодаря добавленной логике используется только один способ.

**TODO:** В будущем рекомендуется полностью отказаться от метода `_create_menus()` в пользу `setup_menus()` и `MenuManager`.