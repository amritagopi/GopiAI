# Исправление проблемы зависания при открытии диалога эмодзи

## Проблема

При открытии диалога эмодзи через контекстное меню или другие пути программа зависала, и пользователю приходилось закрывать её через диспетчер задач.

## Причина

Основная причина зависания была в установке флага `Qt.WindowStaysOnTopHint` после создания диалога с помощью метода `setWindowFlags` во всех методах, где вызывался диалог эмодзи:

```python
# Устанавливаем флаг, чтобы диалог оставался поверх других окон
dialog.setWindowFlags(dialog.windowFlags() | Qt.WindowStaysOnTopHint)
```

Проблема в том, что метод `setWindowFlags` уничтожает и пересоздает окно, но после него необходимо вызвать `dialog.show()` перед `dialog.exec()`. Однако во всех случаях после `setWindowFlags` сразу вызывался `dialog.exec()` без промежуточного `dialog.show()`, что приводило к некорректному поведению окна и зависанию интерфейса.

## Решение

1. Изменил конструктор класса `EmojiDialog` в файле `app/ui/emoji_dialog.py`, чтобы флаг `WindowStaysOnTopHint` устанавливался сразу при создании диалога:

```python
self.setWindowFlags(
    (self.windowFlags() & ~Qt.WindowContextHelpButtonHint) | Qt.WindowStaysOnTopHint
)
```

2. Удалил строки установки флага `WindowStaysOnTopHint` во всех местах, где вызывался диалог эмодзи:
   - В `app/ui/main_window.py` в методе `_show_emoji_dialog`
   - В `app/ui/code_editor.py` в методе `_show_emoji_dialog`
   - В `app/ui/code_editor_widget.py` в методе `_show_emoji_dialog`

Это решение устраняет необходимость динамического изменения флагов окна после создания диалога, что предотвращает зависание интерфейса.

## Замечания

Диалог эмодзи уже имел обработчик клавиши Escape в методе `keyPressEvent`, но из-за проблемы с флагами окна он мог не реагировать на нажатия клавиш. После внесенных исправлений диалог корректно закрывается по нажатию клавиши Escape.