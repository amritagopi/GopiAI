# Обновление интерфейса чата в стиле WhatsApp

В этом обновлении реализован улучшенный интерфейс чата в стиле WhatsApp с более эргономичным и современным дизайном.

## Основные улучшения

1. **Двухрядная структура интерфейса**
   - Верхний ряд: поле ввода текста сообщения на всю ширину
   - Нижний ряд: кнопки управления (эмодзи, файлы, изображения, стоп, отправка/микрофон)
   - Кнопка отправки/микрофона размещена справа

2. **Увеличенная область ввода текста**
   - Увеличена максимальная высота поля ввода до 150px (было 100px)
   - Добавлена вертикальная прокрутка для длинных сообщений
   - Автоматическое изменение размера при вводе

3. **Новые функциональные кнопки**
   - Добавлена кнопка "Стоп" для остановки генерации ответа
   - Кнопка микрофона/отправки автоматически меняется в зависимости от наличия текста

4. **Улучшенные стили**
   - Реализованы стили как для светлой, так и для темной темы
   - Стилизированы пузыри сообщений в соответствии с WhatsApp
   - Улучшено форматирование отображения сообщений

5. **Дизайн и юзабилити**
   - Добавлен заголовок с иконкой и названием чата
   - Уменьшены размеры кнопок для более компактного интерфейса
   - Реализован адаптивный интерфейс, стили применяются через CSS

## Технические детали
- Класс `ChatWidget` разделен на логические блоки с разными лейаутами
- Добавлен метод `_stop_generation()` для остановки генерации ответа
- Улучшен класс `ExpandingTextEdit` для лучшей адаптации высоты
- Обновлены стили для поддержки как светлой, так и темной темы

## Дальнейшие улучшения
- Реализация функционала записи голоса через микрофон
- Интеграция с эмодзи и обработка их вставки
- Улучшение форматирования кода в сообщениях
- Добавление индикатора набора текста