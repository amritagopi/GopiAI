# Решение проблем с отображением элементов интерфейса в минимальной версии

## Выявленные проблемы

1. **Конфликт стилей между компонентами**:
   - Глобальные стили переопределяли локальные стили диалога
   - Диалог цветовой темы становился прозрачным после применения темы
   - Стили кнопок сбрасывались при обновлении тем
   - Текст в кнопках обрезался из-за неправильных размеров

2. **Проблемы с инициализацией при запуске**:
   - Главное окно выглядело некрасиво при запуске
   - Возникали ошибки при применении тем из конфигурационного файла
   - Дублировались стили, особенно в файле minimal_app.py

3. **Проблемы с путями к файлам настроек**:
   - ThemeManager дублировал "minimal_version" в пути к настройкам
   - Два разных класса сохраняли данные в одно и то же место

## Решения

1. **Изоляция стилей компонентов**:
   - Применение специфичных селекторов CSS (например, `ComplementaryThemeDialog #saveButton` вместо просто `#saveButton`)
   - Сохранение и восстановление пользовательских стилей диалога при изменении глобальной темы
   - Исправление размеров кнопок: использование фиксированного размера (150x45px)

2. **Исправление логики применения темы**:
   - Разделение применения тем для диалогов и приложения
   - Предотвращение повторного применения глобальных стилей к диалогу
   - Упрощение функции apply_global_theme для устранения дублирования

3. **Улучшение начального вида интерфейса**:
   - Добавлены базовые стили для компонентов при запуске
   - Улучшены стили текстовых полей и меню
   - Исправлено выравнивание текста на кнопках

4. **Устранение конфликтов файлов настроек**:
   - Исправлен путь к файлу настроек в ThemeManager

## Ключевые изменения в коде

1. **В complementary_theme_dialog.py**:
   ```python
   # Изоляция стилей для предотвращения конфликта
   ComplementaryThemeDialog #saveButton {
       background-color: #4CAF50;
       border: 1px solid #388E3C;
       color: white;
   }
   
   # Сохранение и восстановление стилей при применении темы
   current_dialog_style = self.styleSheet()
   # ...применение темы...
   self.setStyleSheet(current_dialog_style)
   ```

2. **В theme_selector.py**:
   ```python
   # Исправление пути к файлу настроек
   self.settings_dir = os.path.join(os.path.dirname(os.path.abspath(__file__)), "settings")
   ```

3. **В minimal_app.py**:
   ```python
   # Упрощение логики применения темы
   if not app.styleSheet().strip():
       # Определяем базовые цвета только если нужно
       dark_theme = {
           "main_color": "#2D2D30",
           # ...другие цвета...
       }
       theme_manager.current_theme = dark_theme
       theme_manager.apply_theme()
   ```

## Результаты

- Главное окно имеет эстетичный вид при запуске
- Диалог настройки темы не становится прозрачным
- Кнопки в диалоге отображаются корректно, с текстом и цветами
- Устранено дублирование кода и конфликты стилей
- Исправлены проблемы с путями к файлам настроек